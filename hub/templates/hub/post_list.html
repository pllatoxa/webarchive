{% extends 'archive/base.html' %}
{% block title %}–õ–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤{% endblock %}
{% block content %}
<section class="hero">
    <h1>–õ–µ–Ω—Ç–∞ –ø–æ—Å—Ç–æ–≤</h1>
    <p class="lead">–°–≤–µ–∂–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.</p>
    {% if request.user.is_authenticated %}
        <a class="button ghost" href="{% url 'post_create' %}">–ù–∞–ø–∏—Å–∞—Ç—å –ø–æ—Å—Ç</a>
    {% else %}
        <p class="meta">–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ø–æ—Å—Ç.</p>
    {% endif %}
</section>

<div class="card-grid">
    {% for post in posts %}
        <div class="card">
            <h3>{{ post.title }}</h3>
            <p>{{ post.body|truncatechars:200 }}</p>
            <div class="meta">
                {{ post.author.profile.nickname|default:post.author.username }} ‚Ä¢ {{ post.created_at|date:"d.m.Y H:i" }} ‚Ä¢ üëç {{ post.likes_count }} ‚Ä¢ üí¨ {{ post.comments_count }}
            </div>
            <div class="pill-row">
                {% for tag in post.tags.all %}
                    <span class="pill">#{{ tag.name }}</span>
                {% empty %}
                {% endfor %}
            </div>
        </div>
    {% empty %}
        <p>–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
    {% endfor %}
</div>

{% if is_paginated %}
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}">–ù–∞–∑–∞–¥</a>
        {% endif %}
        <span>–°—Ç—Ä–∞–Ω–∏—Ü–∞ {{ page_obj.number }} –∏–∑ {{ page_obj.paginator.num_pages }}</span>
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">–í–ø–µ—Ä—ë–¥</a>
        {% endif %}
    </div>
{% endif %}
{% endblock %}
